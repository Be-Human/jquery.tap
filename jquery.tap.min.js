!function(n,t){var e=600,i=0,c=0;n.fn.tap=function(t,o,a){return"function"==typeof t&&(a=o,o=t,t=15),"ontouchstart"in window?this.each(function(){var a=0,u=null,l=++i,r=null,h=!1,s=this,g=n(this),f=null;g.click(function(){null!=f&&Date.now()<f||o.apply(s,arguments)}),g.bind("touchstart",function(n){0==c&&(c=l,h=!0,a=0,n.originalEvent.touches&&n.originalEvent.touches[0]&&(u=n.originalEvent.touches[0],r={x:u.screenX,y:u.screenY}))}),g.bind("touchend",function(n){if(c==l&&(c=0),h)if(h=!1,t>a){f=Date.now()+e;var i=n.touches[0];n.pageX=i.pageX,n.pageY=i.pageY,n.clientX=i.clientX,n.clientY=i.clientY,o.apply(s,arguments)}else g.trigger("tap-failed")}),g.bind("touchmove",function(n){if(h){if(0==n.originalEvent.touches.length||null===r)return h=!1;u=n.originalEvent.touches[0],a=Math.sqrt(Math.pow(u.screenX-r.x,2)+Math.pow(u.screenY-r.y,2)),a>t&&(g.trigger("exceed-tap-threshold"),h=!1)}}),g.bind("touchcancel",function(){c==l&&(c=0),h=!1,g.trigger("tap-failed")})}):a||this.click(o),this}}(window.jQuery||window.$);
