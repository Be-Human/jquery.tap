!function(n,t){var i=600,e=0,o=0;n.fn.tap=function(t,c,u){return"function"==typeof t&&(u=c,c=t,t=15),"ontouchstart"in window?this.each(function(){var u=0,r=null,a=++e,l=null,h=!1,s=this,f=n(this),g=null;f.click(function(){null!=g&&Date.now()<g||c.apply(s,arguments)}),f.bind("touchstart",function(n){0==o&&(o=a,h=!0,u=0,n.originalEvent.touches&&n.originalEvent.touches[0]&&(r=n.originalEvent.touches[0],l={x:r.screenX,y:r.screenY}))}),f.bind("touchend",function(n){o==a&&(o=0),h&&(h=!1,t>u?(g=Date.now()+i,c.apply(s,[].slice.call(arguments))):f.trigger("tap-failed"))}),f.bind("touchmove",function(n){if(h){if(0==n.originalEvent.touches.length||null===l)return h=!1;r=n.originalEvent.touches[0],u=Math.sqrt(Math.pow(r.screenX-l.x,2)+Math.pow(r.screenY-l.y,2)),u>t&&(f.trigger("exceed-tap-threshold"),h=!1)}}),f.bind("touchcancel",function(){o==a&&(o=0),h=!1,f.trigger("tap-failed")})}):u||this.click(c),this}}(window.jQuery||window.$);
